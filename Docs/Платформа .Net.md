# Тема: платформа .Net и CLR

## Фичи и плюшки .Net

* Поддержка нескольких языков
* Все языки исполняются в CLR, при компиляции любой язык компилируется в сборку на общем языке CIL - а-ля ассемблер
* Кроссплатформенность
* Единая библиотека классов
* Производительность на .Net 5
* JIT - после сборки получаем exe или dll. Вызывая их - мы будем компилировать только нужный кусок кода, а не все 
* Выполняем все  в песочнице

С точки зрения программирования, .Net Framework  состоит из двух основных составляющих:
* общеязыковая исполнительная среда CLR
* библиотека базовых классов


## CLR - исполняющая среда, аналог jvm

Компиляция кода в .net происходит в два этапа
	
1. Компиляция исходного кода в Microsoft Intermediate Language (IL) /MSIL/ CIL
2. Компиляция IL в специфичный для платформы код с помощью CLR

Основной механизм CLR физически имеет вид библиотеки под названием mscoree.dll (Common Object Runtime Execution Engine)

Схема переходов состояний представлена ниже:

### Format: ![Схема работы .Net кода](https://professorweb.ru/my/ASP_NET/base/level1/files/img51000.png)

Использование байт-кода с четко определенным универсальным синтаксисом дает ряд существенных преимуществ:
	Независимость от платформа
	Повышение производительности (JIT) + оптимизация под процессор так как JIT уже знает об этом

## Составляющие CLR 

### Сборки
> Сборки – это файлы с расширениями *.dll или *.exe, которые содержат независимые от платформы .NET инструкции на промежуточном языке (Intermediate Language – IL), а также метаданные типов.


### Манифест
> Манифест – это описание самой сборки с помощью метаданных.
> В манифесте размещается информация:
>* о текущей версии сборки;
>* сведения о культуре (локализация строчных и графических ресурсов);
>* перечень ссылок на все внешние сборки, которые нужны для правильного функционирования.


Существует два вида сборок:
>* однофайловые сборки;
>* многофайловые сборки.

Главная сборка библиотеки MS VS размещается в файле “mscorlib.dll”.

### Common Type System
>CTS (Common Type System) – система типов, которая содержит полное описание всех возможных типов данных и программных конструкций, которые поддерживаются общеязыковой исполнительной средой CLR. Также здесь описывается то, как эти сущности могут взаимодействовать между собою. Типами могут быть классы, интерфейсы, структуры, перечисления, делегаты.

### Метаданные
>Метаданные содержат описание типов в коде, включая определение каждого типа, сигнатуры каждого члена типа, члены, на которые есть ссылки в коде, а также другие сведения, используемые средой выполнения во время выполнения. 
